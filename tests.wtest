import config.*
import trenes.*
import textos.*
import vias.*

const trenesdeprueba = [
  new Trenes(
    posicionInicial = game.at(1,0),
    position = game.at(1,0)
  ),
  new Trenes(
      posicionInicial = game.at(18,10),
      position = game.at(18,10)
  ),
  new Trenes(
      posicionInicial = game.at(26,-10),
      position = game.at(26,-10)
  )
]

test "movimiento en diagonal" {
    trenesdeprueba.get(0).position(game.at(1, 0))
    trenesdeprueba.get(0).diagonal()
    assert.equals(game.at(2, 0.5), trenesdeprueba.get(0).position())
}

test "movimiento hacia arriba" {
    trenesdeprueba.get(2).position(game.at(10, 16))
    trenesdeprueba.get(2).arriba()
    assert.equals(game.at(10, 17), trenesdeprueba.get(2).position())
}

test "movimiento hacia abajo"{
    trenesdeprueba.get(2).position(game.at(10, 10))
    trenesdeprueba.get(2).abajo()
    assert.equals(game.at(10, 9), trenesdeprueba.get(2).position())
}

test "movimiento hacia derecha" {
    trenesdeprueba.get(1).position(game.at(18, 10))
    trenesdeprueba.get(1).derecha()
    assert.equals(game.at(19, 10), trenesdeprueba.get(1).position())
}

test "movimiento hacia izquierda" {
    trenesdeprueba.get(1).position(game.at(18, 10))
    trenesdeprueba.get(1).izquierda()
    assert.equals(game.at(17, 10), trenesdeprueba.get(1).position())
}

test "tren 1 inicia con barrera en false" {
    assert.notThat(trenesdeprueba.get(0).barrera())
}

test "borrar tren 1 activa la barrera" {
    trenesdeprueba.get(0).barrera(false)
    trenesdeprueba.get(0).borrar()
    assert.that(trenesdeprueba.get(0).barrera())
}

test "borrar tren 1 retorna true" {
    trenesdeprueba.get(0).barrera(false)
    const resultado = trenesdeprueba.get(0).borrar()
    assert.that(resultado)
}

test "regenerar tren 1 restaura posición inicial" {
    trenesdeprueba.get(0).position(game.at(10, 10))
    trenesdeprueba.get(0).barrera(true)
    trenesdeprueba.get(0).regenerar()
    assert.equals(game.at(1, 0), trenesdeprueba.get(0).position())
}

test "regenerar tren 2 restaura posición inicial" {
    trenesdeprueba.get(1).position(game.at(10, 10))
    trenesdeprueba.get(1).barrera(true)
    trenesdeprueba.get(1).regenerar()
    assert.equals(game.at(18, 10), trenesdeprueba.get(1).position())
}

test "regenerar tren 3 restaura posición inicial" {
    trenesdeprueba.get(2).position(game.at(10, 10))
    trenesdeprueba.get(2).barrera(true)
    trenesdeprueba.get(2).regenerar()
    assert.equals(game.at(26, -10), trenesdeprueba.get(2).position())
}

test "tren 1 se crea exitosamente"{
    trenesdeprueba.get(0).crearTren()
    assert.equals(game.at(1,0), trenesdeprueba.get(0).position())
}

test "tren 2 se crea exitosamente"{
    trenesdeprueba.get(1).crearTren()
    assert.equals(game.at(18,10), trenesdeprueba.get(1).position())
}

test "tren 3 se crea exitosamente"{
    trenesdeprueba.get(2).crearTren()
    assert.equals(game.at(26,-10), trenesdeprueba.get(2).position())
}